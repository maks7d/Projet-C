#include <iostream>
#include <string.h>
#include <stdio.h>
#define taille 100
struct client{
	//nom, prenom, fonction, mdp...
	char nom[25];
	char prenom[25];
	int fonction; // 1 : etudiant ; 2 : cuisinier; 3 : administration;
	int mdp;
	int solde;
};

struct menus{
	//menus ou sandwichs, description, prix...
};
void creation(struct client tab[], int position)
{
	char fonction[25];
	fflush(stdin);
	printf("Entrez le nom : ");
	fgets(tab[position].nom, 25, stdin);
	fflush(stdin);
	printf("Entrez le prenom : ");
	fgets(tab[position].prenom, 25, stdin);
	fflush(stdin);
	do {
		fflush(stdin);
		printf("Entrez la fonction (etudiant/cuisinier/administration) : ");
		fgets(fonction, 25, stdin);
		if(strcmp(fonction, "etudiant") != 0 ||
			strcmp(fonction, "administration") != 0 ||
			strcmp(fonction, "cuisinier") != 0)
			printf("Entree invalide\n");

	} while (strcmp(fonction, "etudiant") != 0 ||
		strcmp(fonction, "administration") != 0 ||
		strcmp(fonction, "cuisinier") != 0);

		if (strcmp(fonction, "etudiant") == 0)
			tab[position].fonction = 1;
		else if (strcmp(fonction, "cuisinier") == 0)
			tab[position].fonction = 2;
		else if (strcmp(fonction, "administration") == 0)
			tab[position].fonction = 3;
	//ajout dans le fichier
}
int connexion(struct client tab[], int position)
{

	char prenom[25], nom[25];
	int mdp, trouve = 0;
	printf("Prenom: ");
	fgets(prenom, 25, stdin);
	printf("\nNom :");
	fgets(nom, 25, stdin);
	printf("\nmot de passe : ");
	scanf_s("%d", &mdp);

	do {
		if (strcmp(prenom, tab[position].prenom) == 0)
		{
			if (strcmp(nom, tab[position].nom) == 0)
			{
				if (mdp == tab[position].mdp)
					trouve = 1;
			}
		}
		else {
			position++;
		}

	} while (trouve == 0);
		int num_fonction = tab[position].fonction;
		return num_fonction;
}
void menus()//affichage des menus rentrés par le cuisinier 
{

}
int main()
{
	struct client tableau[taille];
	int replay = 0, choix, position = 0, fonction;
	do {
		
		printf("Creer un compte...1\n");
		printf("Se connecter......2\n");
		printf("Plats proposes....3\n");
		printf("Statistiques......4\n");
		scanf_s("%d", &choix);
		switch (choix)
		{
		case 1: //creer un compte->ajout dans un struct
			creation(tableau, position);
			position++;
			break;
		case 2:	//connexion a un compte
			fonction = connexion(tableau, position);
			if (fonction == 1) // etudiant
			{

			}
			else if (fonction == 2) //cuisinier
			{
				
			}
			else if (fonction == 3) //admin
			{

			}
			break;
		case 3:	//plats proposés
			menus();
			break;
		}
	
	}while (replay == 0); //boucle de rejouer
}
